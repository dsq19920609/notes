
### 支持的转换格式

**Rollup可以很方便的打包libary和应用程序，非常方便，尤其是构建libary**

支持的转换格式： `es | esm`、`cjs`、`umd`、 `amd`, `iife`

`es | esm`:  打包成ES模块文件，在浏览器中可以通过`<script type="module" src='./dist/bundle.js'></script>`

`cjs`: 打包成`CommonJs`规范的模块，适用于`node`和`webpack`

`amd`: 打包成`requireJs`可加载的异步加载模块

`umd`: 打包成`amd`、`cjs`、`iife`格式

`iife`: 打包出一个函数包裹的立即执行函数

<br/>

### 最主要的功能tree-shaking

`首先tree-shaking的前提是文件是符合es模块的文件，这样才可以通过静态分析import, 在打包的时候排除掉没有使用的代码(导入但为使用也是会被tree-shaking)`

<br/>

### @rollup/plugin-commonjs

[详见]('./rollup-plugin-commonjs.md')

~~~js
// rollup.config.js
import babel from 'rollup-plugin-babel';
import json from  'rollup-plugin-json';
import pkg from './package.json';

export default {
  input: 'src/index.js' // 入口文件
  plugins: [ // 使用的插件
    babel(),
    json()
  ],
  external: Object.keys(pkg.dependencis).concat(['fs', 'path']), // 打包时排除的依赖
  output: [ // 打包输出多个格式的文件
    {
      format: 'es',
      file: pkg.module,
      sourcemap: true
    },
    {
      format: 'cjs',
      file: pkg.main,
      sourcemap: true
    }
  ]
}s
~~~